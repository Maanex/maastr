/*! maastr 1.0 (c) 2020 Andreas May */
(function(){"use strict";return this.maastr={},this.maastr.default={tokens:{"**":"bold",__:"underline","~~":"strikethrough","*":"italic"},settings:{htmlTag:"span",prefix:"",suffix:""}},this.maastr.parse=function(t,e=maastr.default.tokens,s=maastr.default.settings){let l={};for(let t in e)"string"==typeof e[t]?l[t]=[e[t],!1,!1]:l[t]=[e[t][0],!!e[t][1],!!e[t][2]];e=l;let a=[[]],n="",r=t.split(""),i="",h=0;for(let t=0;t<r.length;t++){let s=r[t],l=n+s;2==l.length&&e[l]?(i=i.substr(0,i.length-1),e[l][2]=!e[l][2],n="",h--):!e[s]||t+1<r.length&&e[s+r[t+1]]?(i+=s,n=s,h++):(e[s][2]=!e[s][2],n=""),a[h]=[];for(let t of Object.values(e))t[2]&&a[h].push(t)}if(t=i,i="",Object.keys(a).length){for(let e=0;e<t.length;e++){let l=[],n=[],r=0;for(let s of a[e])s[1]?l.push(s[0]):0!=e&&a[e-1].filter(t=>t[0]==s[0]).length?e!=t.length-1&&a[e+1].filter(t=>t[0]==s[0]).length||r++:n.push(s[0]);let h=t.split("")[e];if(l.length&&(" "==h&&(h="&nbsp;"),h=`<${s.htmlTag||"span"} class="${l.join(" ")}">${h}</${s.htmlTag||"span"}>`),n.length)for(let t of n)h=`<${s.htmlTag||"span"} class="${t}">${h}`;r&&(h+=`</${s.htmlTag||"span"}>`.repeat(r)),i+=h}i=(s.prefix||"")+i+(s.suffix||"")}return i||t},this.maastr}).call(this);
